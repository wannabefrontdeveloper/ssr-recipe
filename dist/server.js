(()=>{"use strict";var e={n:r=>{var s=r&&r.__esModule?()=>r.default:()=>r;return e.d(s,{a:s}),s},d:(r,s)=>{for(var t in s)e.o(s,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:s[t]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=require("react-dom/server");var s=e.n(r);const t=require("express");var n=e.n(t);const o=require("react-router-dom/server"),i=require("react-router-dom"),a=require("react/jsx-runtime"),l=()=>(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)(i.Link,{to:"/red",children:"Red"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.Link,{to:"/blue",children:"Blue"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.Link,{to:"/users",children:"Users"})})]}),u=()=>(0,a.jsx)("div",{className:"Red",children:"Red"}),c=()=>(0,a.jsx)(u,{}),d=()=>(0,a.jsx)("div",{className:"Blue",children:"Blue"}),h=()=>(0,a.jsx)(d,{}),p=require("react"),x=e=>{let{users:r}=e;return r?(0,a.jsx)("div",{children:(0,a.jsx)("ul",{children:r.map((e=>(0,a.jsx)("li",{children:(0,a.jsx)(i.Link,{to:"/users/".concat(e.id),children:e.username})},e.id)))})}):null},j=require("react-redux"),m=require("axios");var y=e.n(m);const v=require("redux-saga/effects"),g="users/GET_USERS_PENDING",S="users/GET_USERS_SUCCESS",f="users/GET_USERS_FAILURE",E="users/GET_USER",R="users/GET_USER_SUCCESS",_="users/GET_USER_FAILURE",q=e=>({type:E,payload:e}),b=e=>({type:R,payload:e}),k=e=>({type:_,payload:e,error:!0}),P=()=>async e=>{try{e({type:g});const r=await y().get("https://jsonplaceholder.typicode.com/users");e({type:S,payload:r})}catch(r){throw e({type:f,error:!0,payload:r}),r}},T=e=>y().get("https://jsonplaceholder.typicode.com/users/".concat(e));function*U(e){try{const r=yield(0,v.call)(T,e.payload);yield(0,v.put)(b(r.data))}catch(e){yield(0,v.put)(k(e))}}function*w(){yield(0,v.takeEvery)(E,U)}const C={users:null,user:null,loading:{users:!1,user:!1},error:{users:null,user:null}},D=(0,p.createContext)(null),G=D,L=e=>{let{resolve:r}=e;const s=(0,p.useContext)(D);return s?(s.done||s.promises.push(Promise.resolve(r())),null):null},N=()=>{const e=(0,j.useSelector)((e=>e.users.users)),r=(0,j.useDispatch)();return(0,p.useEffect)((()=>{e||r(P())}),[r,e]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{users:e}),(0,a.jsx)(L,{resolve:()=>r(P)})]})},O=e=>{let{user:r}=e;const{email:s,name:t,username:n}=r;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{children:[n," (",t,")"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("b",{children:"e-mail:"})," ",s]})]})},A=e=>{let{id:r}=e;const s=(0,j.useSelector)((e=>e.users.user)),t=(0,j.useDispatch)();return(0,p.useEffect)((()=>{s&&s.id===parseInt(r,10)||t(q(r))}),[t,r,s]),s?(0,a.jsx)(O,{user:s}):(0,a.jsx)(L,{resolve:()=>t(q(r))})},F=()=>{const{id:e}=(0,i.useParams)();return(0,a.jsx)(A,{id:e})},I=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N,{}),(0,a.jsx)(i.Routes,{children:(0,a.jsx)(i.Route,{path:":id",element:(0,a.jsx)(F,{})})})]}),B=()=>(0,a.jsxs)("div",{children:[(0,a.jsx)(l,{}),(0,a.jsx)("hr",{}),(0,a.jsxs)(i.Routes,{children:[(0,a.jsx)(i.Route,{path:"/red",element:(0,a.jsx)(c,{})}),(0,a.jsx)(i.Route,{path:"/blue",element:(0,a.jsx)(h,{})}),(0,a.jsx)(i.Route,{path:"/users/*",element:(0,a.jsx)(I,{})})]})]}),J=require("path");var M=e.n(J);const Y=require("fs");var z=e.n(Y);const H=require("redux"),K=require("redux-thunk");function*Q(){yield(0,v.all)([w()])}const V=(0,H.combineReducers)({users:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case g:return{...e,loading:{...e.loading,users:!0}};case S:return{...e,loading:{...e.loading,users:!1},users:r.payload.data};case f:return{...e,loading:{...e.loading,users:!1},error:{...e.error,users:r.payload}};case E:return{...e,loading:{...e.loading,user:!0},error:{...e.error,user:null}};case R:return{...e,loading:{...e.loading,user:!1},user:r.payload};case _:return{...e,loading:{...e.loading,user:!1},error:{...e.error,user:r.payload}};default:return e}}}),W=require("redux-saga");var X=e.n(W);const Z=JSON.parse(z().readFileSync(M().resolve("./build/asset-manifest.json"),"utf8")),$=n()(),ee=n().static(M().resolve("./build"),{index:!1});$.use(ee),$.use((async(e,r,t)=>{const n=X()(),i=(0,H.createStore)(V,(0,H.applyMiddleware)(K.thunk,n)),l=n.run(Q).toPromise(),u={done:!1,promises:[]},c=(0,a.jsx)(G.Provider,{value:u,children:(0,a.jsx)(j.Provider,{store:i,children:(0,a.jsx)(o.StaticRouter,{location:e.url,context:{},children:(0,a.jsx)(B,{})})})});s().renderToStaticMarkup(c),i.dispatch(W.END);try{await l,await Promise.all(u.promises)}catch(e){return r.status(500)}u.done=!0;const d=s().renderToString(c),h=JSON.stringify(i.getState()).replace(/</g,"\\u003c"),p="<script>__PRELOADED_STATE__= ".concat(h,"<\/script>");r.send(function(e,r){return'<!DOCTYPE html>\n  <html lang="en">\n  <head>\n  <meta charset="utf-8" />\n  <link rel="shortcut icon" href="/favicon.ico" />\n  <meta \n  name="viewport"\n  content="width=device-width,initial-scale=1, shrink-to-fit=no"\n  />\n  <meta name="theme-color" content="#000000" />\n  <title>React App</title>\n  <link href="'.concat(Z.files["main.css"],'" rel="stylesheet" />\n  </head>\n  <body>\n  <noscript>You need to enable JavaScript to run this app.</noscript>\n  <div id="root">').concat(e,"</div>\n  ").concat(r,'\n  <script src="').concat(Z.files["main.js"],'"><\/script>\n  </body>\n  </html>\n  ')}(d,p))})),$.listen(5e3,(()=>{console.log("Running on http://localhost:5000")}))})();